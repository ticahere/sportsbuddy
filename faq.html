<!DOCTYPE html>
<html lang="en">
    
   
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>SportsBuddy FAQ</title>
        <link href="css/styles.css" rel="stylesheet" />
        <link rel="prefetch" href="header.html">
        <link rel="prefetch" href="head.html">
        <link rel="prefetch" href="footer.html">
        <link rel="prefetch" href="blog-previews.html">
        <script src="js/loadTemplate.js" ></script>
        <script src="js/languageSwitcher.js"></script> 
        
        <style>
            /* Header section styles */
            .faq-header {
                background: linear-gradient(130deg, rgb(231 255 172) 0%, rgb(255 200 87) 50%, rgb(184 255 117) 100%);
                color: #ffffff;
                padding: 60px 20px;
                text-align: center;
            }
            
            .faq-header h1 {
                font-family: 'Varela Round', sans-serif;
                font-size: 2.5rem;
                font-weight: bold;
                margin-bottom: 10px;
            }

            .faq-header p {
                font-family: 'Nunito', sans-serif;
                font-size: 1.25rem;
                margin-bottom: 0;
            }
            .faq-section {
                margin-bottom: 5rem;
            }

            /* FAQ Table styles */
            .faq-table {
                width: 100%;
                margin: 40px 0;
                border-collapse: separate;
                border-spacing: 0 10px; /* Adds space between rows */
            }

            .faq-table th, .faq-table td {
                padding: 20px;
                text-align: left;
                vertical-align: top;
                border-radius: 8px;
            }

            .faq-table th {
                background-color: #eeeae3; 
                color: var(--bs-secondary);
                font-size: 1.25rem;
                font-weight: bold;
            }

            .faq-table td {

                color: #333;
                font-size: 1rem;
            }
            .faq-header h1 {
                font-family: 'Varela Round', sans-serif;
                font-size: 2.5rem;
                font-weight: bold;
                margin-bottom: 10px;
            }

            .faq-header p {
                font-family: 'Nunito', sans-serif;
                font-size: 1.25rem;
                margin-bottom: 0;
            }


        </style>
    </head>
    <body id="home" class="blog-post" data-bs-spy="scroll" data-bs-target="#mainNav" data-bs-offset="70">
        
        <!-- Header -->
        <header class="faq-header">
            <div class="container px-4 px-lg-5 d-flex h-100 align-items-center justify-content-center">
                <div class=" justify-content-center w-100">
                    <div class="text-center">
                        <h1 class="mx-auto mt-3 text-uppercase mb-3" data-translate="faqTitle">SportsBuddy FAQ</h1>
                    </div>
                </div>
            </div>
        </header>
        <!-- Filter Buttons -->
        <div class="row mb-4 filter-btn-container">
            <div>
                <button class="btn filter-btn active" data-filter="all" data-translate="faq-all">All</button>
                <button class="btn filter-btn" data-filter="general" data-translate="faq-general">General</button>
                <button class="btn filter-btn" data-filter="product" data-translate="faq-product">Product</button>
                <button class="btn filter-btn" data-filter="support" data-translate="faq-feedback">Tech Support & Feedback</button>
            </div>
        </div>

        <section class="faq-section">
            <div class="container">
                <table class="faq-table" id="faqTable">
                    <!-- FAQ items will be loaded here -->
                </table>
            </div>
        </section>
        
        <!-- Footer-->
        
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                let faqData = [];

                // Get the current language from the URL or default to 'en'
                const lang = getLanguageFromUrl();

                // Fetch the appropriate FAQ JSON file based on the selected language
                fetch(`lang/faq_${lang}.json`)
                    .then(response => response.json())
                    .then(data => {
                        faqData = data;

                        // Check URL for filter parameter
                        const urlParams = new URLSearchParams(window.location.search);
                        const filterParam = urlParams.get('filter');

                        // Apply the filter if it exists in the URL, otherwise load all
                        const initialFilter = filterParam ? filterParam : 'all';
                        applyFilter(initialFilter);

                        // Add click event listeners to filter buttons
                        const filterButtons = document.querySelectorAll('.filter-btn');
                        filterButtons.forEach(button => {
                            button.addEventListener('click', function() {
                                const filter = this.getAttribute('data-filter');
                                applyFilter(filter);
                            });
                        });
                    })
                    .catch(error => console.error('Error loading FAQ data:', error));

                function applyFilter(filter) {
                    // Remove active class from all buttons
                    const filterButtons = document.querySelectorAll('.filter-btn');
                    filterButtons.forEach(btn => btn.classList.remove('active'));

                    // Find the button with the matching filter and add the active class
                    const activeButton = document.querySelector(`.filter-btn[data-filter="${filter}"]`);
                    if (activeButton) {
                        activeButton.classList.add('active');
                    }

                    // Update the URL to reflect the current filter
                    const newUrl = `${window.location.pathname}?filter=${filter}&lang=${lang}`;
                    history.pushState(null, '', newUrl);

                    // Filter the FAQ data based on the selected category
                    const filteredData = filter === 'all' ? faqData : faqData.filter(item => item.category === filter);

                    // Render the filtered FAQs
                    renderFAQs(filteredData);
                }

                function renderFAQs(data) {
                    const faqTable = document.getElementById('faqTable');
                    faqTable.innerHTML = ''; // Clear the table

                    data.forEach((item, index) => {
                        // Create question row
                        const questionRow = document.createElement('tr');
                        const questionCell = document.createElement('th');
                        questionCell.textContent = `${item.id}. ${item.question}`;
                        questionRow.appendChild(questionCell);

                        // Create answer row
                        const answerRow = document.createElement('tr');
                        const answerCell = document.createElement('td');
                        
                        // Set the innerHTML of the answer cell to render HTML content properly
                        answerCell.innerHTML = item.answer;
                        
                        answerRow.appendChild(answerCell);

                        // Append the rows to the table
                        faqTable.appendChild(questionRow);
                        faqTable.appendChild(answerRow);
                    });
                }

                // Function to get the current language from the URL or default to 'en'
                function getLanguageFromUrl() {
                    const params = new URLSearchParams(window.location.search);
                    return params.get('lang') || 'en';
                }
            });

        </script>
    </body>
</html>
